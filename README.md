# ПРИЛОЖЕНИЕ ИСПОЛЬЗУЕТ:
- Java 23, Oracle OpenJDK 23.0.1
- Maven
- Spring Boot (JPA, Web), Lombok
- MySQL
- JavaScript, HMTL (frontend)

# ЗАПУСТИТЬ BACKEND
Создайте базу данных в MySQL.  
`CREATE DATABASE supply_app;`

Откройте каталог `\Supply-Application\backend` в IntelliJ IDEA.

Настройте SDK:  
File -> Project Structure -> SDK: Oracle OpenJDK 23.0.1  
https://www.oracle.com/java/technologies/javase/jdk23-archive-downloads.html

Указажите следующие environment variables:
- DB_URL  
Например: `jdbc:mysql://localhost:3306/supply_app`
- DB_USER
- DB_PASSWORD
- FRONTEND_URL (см. ниже) 

После запуска приложения будут созданы таблицы из сущностей.  
Для начала работы необходимо вручную вставить в таблицу product продукты из enum ProductType:

INSERT INTO product (product_type)  
VALUES  
('GREEN_APPLE'),  
('RED_APPLE'),  
('GREEN_PEAR'),  
('YELLOW_PEAR');

# ЗАПУСТИТЬ FRONTEND:
Откройте каталог `\Supply-Application\frontend` в Visual Studio Code.

Запустите index.html расширением Live Server.

По умолчанию URL будет http://127.0.0.1:5500 - это и есть FRONTEND_URL.

# ЛОГИКА РАБОТЫ:
Сайт преполагает авторизацию (без Spring Security).  
Для начала нужно зарегистрироваться (username'ы уникальны).   
После чего возможно использовать основной функционал:

- создать ценовые периоды на различные продукты,
- создавать поставки,
- создавать отчеты по поставкам за определенный период.

Цены на продукты указываются на период.  
Можно указать цены на несколько продуктов.  
При создании поставки будет выполняется проверка, существует ли цена на эту дату.  
ЗА ДАТУ ОФОРМЛЕНИЯ ПОСТАВКИ БЕРЕТСЯ ТЕКУЩАЯ ДАТА (!)

Для того, чтобы протестировать отчет на разные периоды, необходимо изменить дату поставки в таблице supply.

Например:   
UPDATE supply  
SET supply_date = '2025-03-22'  
WHERE supply_id = 5;  

НЕ МЕНЯЙТЕ ДАТУ ПОСТАВКИ НА ТУ, КОТОРАЯ НЕ НАХОДИТСЯ В СУЩЕСТВУЮЩИХ ЦЕНОВЫХ ПЕРИОДАХ.  
SQL-запрос отчета берет цену продукта, исходя из цен на конкретный период.  
При оформлении поставки наличие цены на продукт на текущую дату учитывается, 
а ручное изменение даты поставки запросом в БД не подразумевается приложением.

Пример валидного изменения даты для теста:  
Были указаны цены на 17.03.2025 - 25.03.2025 и на 26.03.2025 - 30.03.2025.  
Было создано несколько поставок 20-го числа.  
Даты нескольких поставок были изменены на 28 и 29 числа.



 
